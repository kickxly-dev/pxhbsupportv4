<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P.X HB Support</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="global-banner" id="globalBanner" style="display:none;"></div>
    <div class="toast-container" id="toastContainer"></div>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-text">P.X HB</span>
                <span class="logo-badge">SUPPORT</span>
            </div>
            <div class="nav-links">
                <a href="#home" class="nav-link">Home</a>
                <a href="#about" class="nav-link">About</a>
                <a href="#contact" class="nav-link">Contact</a>
                <button class="mobile-staff-login" onclick="showMobileStaffLogin()">
                    <i class="fas fa-user-shield"></i>
                    <span>Staff</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="support-layout">
                <div class="support-left">
                    <div class="hero-badge">
                        <i class="fas fa-bolt"></i>
                        <span>24/7 Live Support</span>
                    </div>
                    <h1 class="hero-title">P.X HB Support Center</h1>
                    <p class="hero-subtitle">Get instant help from our expert support team. We're here for you anytime, anywhere.</p>
                    <div class="hero-actions">
                        <button class="chat-toggle-btn" onclick="openChat()">
                            <i class="fas fa-comments"></i>
                            <span>Start Chat</span>
                        </button>
                        <button class="staff-login-btn" onclick="showStaffLogin()">
                            <i class="fas fa-user-shield"></i>
                            <span>Staff Login</span>
                        </button>
                    </div>
                    <div class="staff-info">
                        <p><strong>Staff Login:</strong> Authorized staff only</p>
                    </div>
                </div>

                <div class="support-right" id="chatPanel">
                    <div class="chat-widget embedded" id="chatWidget">
                        <div class="chat-header">
                            <div class="chat-header-info">
                                <div class="chat-status">
                                    <span class="status-dot"></span>
                                    <span>Support Team</span>
                                </div>
                            </div>
                        </div>

                        <div class="prechat-gate" id="preChatGate" style="display:none;">
                            <div class="prechat-card">
                                <h3>Quick Support Form</h3>
                                <p>Please fill this out to start the chat.</p>
                                <div class="prechat-row">
                                    <label>Issue Type</label>
                                    <select id="preChatIssue" required>
                                        <option value="" selected disabled>Select one…</option>
                                        <option value="billing">Billing</option>
                                        <option value="login">Login</option>
                                        <option value="bug">Bug / Technical</option>
                                        <option value="ban">Ban / Mute Appeal</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="prechat-row">
                                    <label>Short Description</label>
                                    <textarea id="preChatDesc" placeholder="What happened?" maxlength="300" required></textarea>
                                </div>
                                <button class="prechat-btn" onclick="submitPreChatForm()">Start Chat</button>
                            </div>
                        </div>

                        <div class="chat-messages" id="chatMessages">
                            <div class="welcome-message">
                                <div class="message-content">
                                    <p>Welcome to P.X HB Support! How can we help you today?</p>
                                </div>
                            </div>
                        </div>

                        <div class="chat-input-container">
                            <div class="quick-actions">
                                <button onclick="sendQuickMessage('I need help with my account')" class="quick-action-btn">Account Help</button>
                                <button onclick="sendQuickMessage('I have a technical issue')" class="quick-action-btn">Technical Issue</button>
                                <button onclick="sendQuickMessage('I need billing support')" class="quick-action-btn">Billing</button>
                            </div>
                            <div class="liveassist-row">
                                <label class="liveassist-toggle">
                                    <input type="checkbox" id="liveAssistToggle" onchange="setLiveAssistOptInFromUi()">
                                    <span>Allow Live Assist</span>
                                </label>
                                <span class="liveassist-hint">(optional)</span>
                            </div>
                            <div class="chat-input-wrapper">
                                <input type="file" id="chatImageInput" accept="image/png,image/jpeg,image/webp,application/pdf" style="display:none;" onchange="handleChatImageSelected(event)">
                                <button onclick="openChatImagePicker()" class="chat-attach-btn" aria-label="Upload image">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                                <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
                                <button onclick="sendMessage()" class="chat-send-btn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Staff Login Modal -->
    <div class="staff-modal" id="staffLoginModal" style="display: none;">
        <div class="staff-modal-content">
            <h3>🔐 Staff Login</h3>
            <div class="staff-credentials-info">
                <p><strong>Available Accounts:</strong></p>
                <div class="credential-list">
                    <div class="credential-item">
                        <span class="role">Administrator:</span>
                        <span class="creds">Hidden</span>
                    </div>
                    <div class="credential-item">
                        <span class="role">Support Agent:</span>
                        <span class="creds">Hidden</span>
                    </div>
                    <div class="credential-item">
                        <span class="role">Moderator:</span>
                        <span class="creds">Hidden</span>
                    </div>
                </div>
            </div>
            <form id="staffLoginForm">
                <input type="text" id="staffUsername" placeholder="Username" required>
                <input type="password" id="staffPassword" placeholder="Password" required>
                <button type="submit">Login</button>
                <button type="button" onclick="closeStaffLogin()">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Mobile Staff Login Modal -->
    <div class="mobile-staff-modal" id="mobileStaffLoginModal" style="display: none;">
        <div class="mobile-modal-content">
            <h3>Staff Login</h3>
            <form id="mobileStaffLoginForm">
                <input type="text" id="mobileStaffUsername" placeholder="Username" required>
                <input type="password" id="mobileStaffPassword" placeholder="Password" required>
                <button type="submit">Login</button>
                <button type="button" onclick="closeMobileStaffLogin()">Cancel</button>
            </form>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>